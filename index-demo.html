import React, { useState, useEffect, useRef } from 'react';
import { Check, ChevronRight, AlertCircle, Loader2, Send, X } from 'lucide-react';

/**
* ------------------------------------------------------------------
* ğŸ¨ å“ç‰Œè‰²èª¿è¨­å®š (Brand Theme)
* åš´æ ¼éµå¾ªé™åˆ¶ä¸­çš„è‰²ç¢¼
* ------------------------------------------------------------------
*/
const theme = {
slate: '#4a6161', // ä¸»è¦æŒ‰éˆ•ã€å“ç‰Œè­˜åˆ¥
mist: '#8a9a9a', // æ¬¡è¦æŒ‰éˆ•ã€åœ–ç¤º
sandstone: '#a69d93', // å¼·èª¿æ¨™ç±¤
oatmeal: '#f2f2ef', // èƒŒæ™¯åº•è‰²
paper: '#fafaf9', // å¡ç‰‡å®¹å™¨
pebble: '#e0e0dc', // åˆ†éš”ç·š
obsidian: '#3d4242', // ä¸»è¦æ¨™é¡Œ
smoke: '#8c9191', // è¼”åŠ©æ–‡å­—
sage: '#8e9e94', // æˆåŠŸç‹€æ…‹
blush: '#b59393' // éŒ¯èª¤/è­¦ç¤º
};

/**
* ------------------------------------------------------------------
* âš™ï¸ è¨­å®šå€å¡Š (Configuration)
* ------------------------------------------------------------------
*/
// TODO: è«‹åœ¨æ­¤å¡«å…¥æ‚¨çš„ Google Apps Script éƒ¨ç½²ç¶²å€
const GAS_URL = "";

/**
* ------------------------------------------------------------------
* ğŸ§© å®¢è£½åŒ– UI å…ƒä»¶ (Custom Components)
* éµå¾ª M3 æŒ‡å¼•ï¼Œå®Œå…¨æ›¿æ›åŸç”Ÿç€è¦½å™¨å…ƒä»¶
* ------------------------------------------------------------------
*/

// 1. å®¢è£½åŒ–è¼¸å…¥æ¡† (Floating Label style or Filled style)
const CustomInput = ({ label, value, onChange, placeholder, type = "text", required = false, multiline = false }) => {
const [focused, setFocused] = useState(false);

return (
<div className="mb-6 relative group">
    <label className={`block text-sm font-medium mb-2 transition-colors duration-200 ${focused ? 'text-slate'
        : 'text-obsidian' }`}>
        {label} {required && <span style={{ color: theme.blush }}>*</span>}
    </label>
    <div className={`relative rounded-xl overflow-hidden transition-all duration-300 border-2 ${focused
        ? 'border-slate bg-white' : 'border-transparent bg-pebble/30 hover:bg-pebble/50' }`}>
        {multiline ? (
        <textarea className="w-full p-4 bg-transparent outline-none text-obsidian min-h-[120px] resize-y" value={value}
            onChange={(e)=> onChange(e.target.value)}
            onFocus={() => setFocused(true)}
            onBlur={() => setFocused(false)}
            placeholder={placeholder}
          />
        ) : (
          <input
            type={type}
            className="w-full p-4 bg-transparent outline-none text-obsidian"
            value={value}
            onChange={(e) => onChange(e.target.value)}
            onFocus={() => setFocused(true)}
            onBlur={() => setFocused(false)}
            placeholder={placeholder}
          />
        )}
      </div>
    </div>
  );
};

// 2. å®¢è£½åŒ–å–®é¸æŒ‰éˆ• (Custom Radio) - è¦–è¦ºå¼·åŒ–ç‰ˆ
const CustomRadio = ({ label, options, value, onChange, name }) => {
  return (
    <div className="mb-8">
      <label className="block text-base font-bold text-obsidian mb-3">{label}</label>
      <div className="flex flex-col gap-3">
        {options.map((opt) => {
          const isSelected = value === opt.value;
          return (
            <div 
              key={opt.value}
              onClick={() => onChange(opt.value)}
              className={`
                relative flex items-center p-4 rounded-xl cursor-pointer transition-all duration-200 border
                ${isSelected 
                  ? 'bg-slate/10 border-slate shadow-sm' // é¸å–æ™‚èƒŒæ™¯åŠ æ·±
                  : 'bg-white border-pebble hover:border-mist hover:bg-white'}
              `}
            >
              {/* å¤–åœˆï¼šé¸å–æ™‚ç›´æ¥å¡«æ»¿ Slate è‰²ï¼Œæœªé¸å–æ™‚ç‚ºç™½è‰²èƒŒæ™¯ */}
              <div className={`
                w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 transition-all duration-200
                ${isSelected ? 'bg-slate border-slate' : 'bg-white border-mist'}
              `}>
                {/* å…§åœˆï¼šé¸å–æ™‚è®Šæˆç™½è‰²é»ï¼Œæœªé¸å–æ™‚æ¶ˆå¤± */}
                <div className={`
                  w-2.5 h-2.5 rounded-full bg-white shadow-sm transition-transform duration-200
                  ${isSelected ? 'scale-100' : 'scale-0'}
                `} />
              </div>
              <span className={`text-sm ${isSelected ? 'text-slate font-bold' : 'text-obsidian'}`}>
                {opt.label}
              </span>
            </div>
          );
        })}
      </div>
    </div>
  );
};

// 3. å®¢è£½åŒ–æ ¸å–æ–¹å¡Š (Custom Checkbox) - è¦–è¦ºå¼·åŒ–ç‰ˆ
const CustomCheckbox = ({ label, checked, onChange, subLabel }) => {
  return (
    <div 
      onClick={() => onChange(!checked)}
      className={`
        flex items-start p-3 -mx-3 rounded-xl cursor-pointer transition-colors group
        ${checked ? 'bg-slate/10' : 'hover:bg-pebble/30'}
      `}
    >
      {/* æ–¹å¡Šï¼šé¸å–æ™‚å¡«æ»¿ Slate è‰²ï¼Œæœªé¸å–æ™‚ç¶­æŒç™½è‰²åº• */}
      <div className={`
        mt-0.5 w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all duration-200 flex-shrink-0 shadow-sm
        ${checked ? 'bg-slate border-slate' : 'bg-white border-mist group-hover:border-slate'}
      `}>
        {/* æ‰“å‹¾ï¼šåŠ ç²— strokeWidthï¼Œè®“ç™½è‰²å‹¾å‹¾æ›´æ˜é¡¯ */}
        <Check size={16} strokeWidth={3} className={`text-white transition-transform duration-200 ${checked ? 'scale-100' : 'scale-0'}`} />
      </div>
      <div className="ml-3">
        <span className={`block text-sm transition-colors ${checked ? 'text-slate font-bold' : 'text-obsidian'}`}>
          {label}
        </span>
        {subLabel && <span className="text-xs text-smoke mt-1 block">{subLabel}</span>}
      </div>
    </div>
  );
};

// 4. å®¢è£½åŒ–é–‹é—œ (Custom Switch)
const CustomSwitch = ({ label, checked, onChange }) => {
  return (
    <div className="flex items-center justify-between py-4">
      <span className="text-obsidian font-medium text-sm">{label}</span>
      <div 
        onClick={() => onChange(!checked)}
        className={`
          w-12 h-7 rounded-full relative cursor-pointer transition-colors duration-300
          ${checked ? 'bg-slate' : 'bg-mist/30'}
        `}
      >
        <div className={`
          absolute top-1 w-5 h-5 rounded-full bg-white shadow-sm transition-all duration-300
          ${checked ? 'left-6' : 'left-1'}
        `} />
      </div>
    </div>
  );
};

// 5. ç¢ºèªè¦–çª— (Confirm Dialog)
const ConfirmDialog = ({ isOpen, onClose, onConfirm, data, isSubmitting }) => {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
      <div className="absolute inset-0 bg-obsidian/60 backdrop-blur-sm" onClick={isSubmitting ? null : onClose} />
      <div 
        className="relative w-full max-w-md bg-paper rounded-3xl shadow-2xl p-6 overflow-hidden animate-in fade-in zoom-in-95 duration-200"
        style={{ backgroundColor: theme.paper }}
      >
        <h3 className="text-xl font-bold text-obsidian mb-2">ç¢ºèªé€å‡ºè³‡æ–™ï¼Ÿ</h3>
        <p className="text-smoke text-sm mb-6">è«‹ç¢ºèªä»¥ä¸‹è³‡è¨Šç„¡èª¤ï¼Œé€å‡ºå¾Œå°‡ç”±å°ˆäººèˆ‡æ‚¨è¯ç¹«ã€‚</p>
        
        <div className="bg-oatmeal/50 rounded-xl p-4 mb-6 max-h-[40vh] overflow-y-auto text-sm text-obsidian space-y-2">
          <p><span className="text-mist">åç¨±ï¼š</span>{data.orgName}</p>
          <p><span className="text-mist">è¯çµ¡ï¼š</span>{data.contact}</p>
          <p><span className="text-mist">é ç®—ï¼š</span>{data.budget}</p>
          <p><span className="text-mist">ä¸»è¦åŠŸèƒ½ï¼š</span>{data.pages.join(', ')}</p>
        </div>

        <div className="flex gap-3 justify-end">
          <button 
            onClick={onClose}
            disabled={isSubmitting}
            className="px-6 py-2.5 rounded-full text-slate font-medium text-sm hover:bg-slate/10 transition-colors disabled:opacity-50"
          >
            è¿”å›ä¿®æ”¹
          </button>
          <button 
            onClick={onConfirm}
            disabled={isSubmitting}
            style={{ backgroundColor: theme.slate }}
            className="px-6 py-2.5 rounded-full text-white font-medium text-sm shadow-md hover:shadow-lg hover:brightness-110 transition-all flex items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed"
          >
            {isSubmitting ? <Loader2 size={16} className="animate-spin" /> : <Send size={16} />}
            {isSubmitting ? 'è™•ç†ä¸­...' : 'ç¢ºèªé€å‡º'}
          </button>
        </div>
      </div>
    </div>
  );
};

// 6. é é¢æ¨™é¡Œå…ƒä»¶
const SectionTitle = ({ number, title, subtitle }) => (
  <div className="mb-8 mt-10 first:mt-0">
    <div className="flex items-center gap-3 mb-2">
      <span 
        className="flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold text-white"
        style={{ backgroundColor: theme.sandstone }}
      >
        {number}
      </span>
      <h2 className="text-lg font-bold" style={{ color: theme.obsidian }}>{title}</h2>
    </div>
    {subtitle && <p className="text-sm ml-9" style={{ color: theme.smoke }}>{subtitle}</p>}
  </div>
);

/**
 * ------------------------------------------------------------------
 * ğŸš€ ä¸»ç¨‹å¼ (Main Application)
 * ------------------------------------------------------------------
 */
export default function App() {
  const [view, setView] = useState('form'); // form | success
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [submitError, setSubmitError] = useState('');

  // è¡¨å–®ç‹€æ…‹
  const [formData, setFormData] = useState({
    orgName: '',
    contact: '',
    purpose: '',
    targetAudience: '',
    pages: [], // Checkbox array
    dataNeeds: '', // Radio value
    updateFreq: '', // Radio value
    stylePref: '',
    refSites: '',
    dataOwnership: false, // Checkbox (Single)
    budget: '', // Radio value
    launchDateType: '', // 'none' | 'specific'
    launchDateValue: '',
    assets: [] // Checkbox array
  });

  // è¼”åŠ©è™•ç† Checkbox Group
  const handleCheckboxGroup = (field, value) => {
    setFormData(prev => {
      const list = prev[field];
      if (list.includes(value)) {
        return { ...prev, [field]: list.filter(item => item !== value) };
      } else {
        return { ...prev, [field]: [...list, value] };
      }
    });
  };

  // é€å‡ºé‚è¼¯
  const handleSubmitClick = () => {
    // ç°¡æ˜“é©—è­‰
    if (!formData.orgName || !formData.contact || !formData.dataOwnership) {
      alert("è«‹å¡«å¯«å¿…å¡«æ¬„ä½ä¸¦åŒæ„è³‡æ–™æˆæ¬Šæ¢æ¬¾ã€‚");
      return;
    }
    setIsDialogOpen(true);
  };

  const handleFinalSubmit = async () => {
    setIsSubmitting(true);
    setSubmitError('');

    try {
      if (GAS_URL) {
        // ä½¿ç”¨ no-cors æ¨¡å¼ï¼Œé€™æ˜¯ GAS ç°¡å–® POST å¸¸è¦‹çš„åšæ³•
        // æ³¨æ„ï¼šno-cors ä¸æœƒå›å‚³ readable responseï¼Œæ‰€ä»¥æˆ‘å€‘åªèƒ½å‡è¨­æˆåŠŸ
        await fetch(GAS_URL, {
          method: 'POST',
          mode: 'no-cors', 
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData),
        });
      } else {
        // æ¨¡æ“¬å»¶é² (è‹¥ç„¡ URL)
        await new Promise(resolve => setTimeout(resolve, 1500));
        console.log("Form Data Submitted:", formData);
      }
      
      setIsDialogOpen(false);
      setView('success');
      window.scrollTo(0, 0);
    } catch (error) {
      console.error("Submission Error:", error);
      setSubmitError("é€£ç·šç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚");
    } finally {
      setIsSubmitting(false);
    }
  };

  // æˆåŠŸé é¢
  if (view === 'success') {
    return (
      <div className="min-h-screen w-full flex items-center justify-center p-6" style={{ backgroundColor: theme.oatmeal }}>
        <div className="w-full max-w-lg bg-paper rounded-3xl shadow-xl p-8 text-center animate-in fade-in slide-in-from-bottom-4 duration-700">
          <div 
            className="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6"
            style={{ backgroundColor: theme.sage + '33' }} // 20% opacity
          >
            <Check size={40} style={{ color: theme.slate }} />
          </div>
          <h2 className="text-2xl font-bold mb-4" style={{ color: theme.obsidian }}>éœ€æ±‚å·²é€å‡º</h2>
          <p className="text-smoke mb-8 leading-relaxed">
            æ„Ÿè¬æ‚¨å¡«å¯«éœ€æ±‚è¡¨å–®ã€‚<br/>
            æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„å°ˆæ¡ˆè³‡è¨Šï¼ˆ{formData.orgName}ï¼‰ï¼Œ<br/>
            å°‡æ–¼ 24 å°æ™‚å…§é€é {formData.contact} èˆ‡æ‚¨è¯ç¹«ã€‚
          </p>
          
          <button 
            onClick={() => window.location.reload()}
            className="px-8 py-3 rounded-full text-white font-bold tracking-wide shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5"
            style={{ backgroundColor: theme.slate }}
          >
            è¿”å›é¦–é 
          </button>
        </div>
      </div>
    );
  }

  // è¡¨å–®é é¢
  return (
    <div className="min-h-screen w-full py-10 px-4 md:px-0" style={{ backgroundColor: theme.oatmeal }}>
      <div className="max-w-2xl mx-auto">
        
        {/* Header */}
        <div className="mb-10 text-center">
          <h1 className="text-3xl font-extrabold mb-3" style={{ color: theme.slate }}>ç¶²ç«™å»ºç½®éœ€æ±‚å–®</h1>
          <p style={{ color: theme.mist }} className="text-sm uppercase tracking-widest font-bold">Web Design Request Form</p>
        </div>

        {/* Form Container */}
        <div className="bg-paper rounded-[2rem] shadow-xl p-6 md:p-10 border border-white/50">
          
          {/* Part 1: åŸºæœ¬è³‡è¨Š */}
          <SectionTitle number="01" title="åŸºæœ¬è³‡è¨Šèˆ‡æ ¸å¿ƒç›®æ¨™" />
          
          <CustomInput 
            label="åº—å®¶/çµ„ç¹”/æ³•äºº/ç¶²ç«™åç¨±" 
            placeholder="è«‹è¼¸å…¥åç¨±"
            value={formData.orgName}
            onChange={(val) => setFormData({...formData, orgName: val})}
            required
          />
          
          <CustomInput 
            label="ç¶²ç«™ä¸­æœƒåˆŠç™»çš„è¯ç¹«æ–¹å¼ (ex: Email/Line/é›»è©±)" 
            placeholder="å‚™è¨»ï¼šåªéœ€å¡«å¯«æœ‰å“ªäº›ï¼Œæš«ä¸éœ€è¦æä¾›IDç­‰è³‡è¨Š"
            value={formData.contact}
            onChange={(val) => setFormData({...formData, contact: val})}
            required
          />

          <CustomInput 
            label="å»ºç«‹ç¶²é çš„ä¸»è¦ç›®çš„" 
            placeholder="ex: åº—å®¶å®˜ç¶²ã€è¡¨å–®ä»‹é¢ã€æ•¸ä½åç‰‡..."
            value={formData.purpose}
            onChange={(val) => setFormData({...formData, purpose: val})}
          />

          <CustomInput 
            label="ç›®æ¨™å—çœ¾" 
            placeholder="ex: æ—¢æœ‰å®¢æˆ¶ã€è¨ªå®¢."
            value={formData.targetAudience}
            onChange={(val) => setFormData({...formData, targetAudience: val})}
          />

          <div className="h-px w-full my-8 bg-pebble" />

          {/* Part 2: åŠŸèƒ½èˆ‡å…§å®¹ */}
          <SectionTitle number="02" title="åŠŸèƒ½èˆ‡å…§å®¹éœ€æ±‚" subtitle="è«‹å‹¾é¸æ‚¨éœ€è¦çš„é é¢çµæ§‹èˆ‡åŠŸèƒ½" />

          <div className="mb-8">
            <label className="block text-base font-bold text-obsidian mb-3">é è¨ˆåŒ…å«é é¢ (å¯è¤‡é¸)</label>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-x-4">
              {['é¦–é ', 'é—œæ–¼æˆ‘ / å…¬å¸ç°¡ä»‹', 'æœå‹™é …ç›® / ç”¢å“åˆ—è¡¨', 'éƒ¨è½æ ¼ / æ–‡ç« åˆ—è¡¨', 'è¯çµ¡æˆ‘å€‘'].map(page => (
                <CustomCheckbox 
                  key={page}
                  label={page}
                  checked={formData.pages.includes(page)}
                  onChange={() => handleCheckboxGroup('pages', page)}
                />
              ))}
              <div className="col-span-1 md:col-span-2 mt-2">
                <CustomInput 
                  label="å…¶ä»–é é¢éœ€æ±‚" 
                  placeholder="å¦‚æœ‰å…¶ä»–éœ€æ±‚è«‹å¡«å¯«"
                  value={formData.otherPage || ''}
                  onChange={(val) => setFormData({...formData, otherPage: val})}
                />
              </div>
            </div>
          </div>

          <CustomRadio 
            label="è³‡æ–™å‚³è¼¸èˆ‡å„²å­˜éœ€æ±‚"
            name="dataNeeds"
            value={formData.dataNeeds}
            onChange={(val) => setFormData({...formData, dataNeeds: val})}
            options={[
              { label: 'ä¸éœ€è¦ï¼Œå–®ç´”å±•ç¤ºè³‡è¨Š (éœæ…‹ç¶²é )', value: 'static' },
              { label: 'éœ€è¦ (æœƒå“¡ã€ç•™è¨€ã€è¡¨å–®è³‡æ–™åº«ç­‰)', value: 'dynamic' }
            ]}
          />

          <CustomRadio 
            label="é è¨ˆæ›´æ–°é »ç‡"
            name="updateFreq"
            value={formData.updateFreq}
            onChange={(val) => setFormData({...formData, updateFreq: val})}
            options={[
              { label: 'å¹¾ä¹ä¸æ›´æ–°', value: 'rare' },
              { label: 'å®šæœŸæ›´æ–°', value: 'regular' },
              { label: 'é«˜é »ç‡è‡ªå‹•æ›´æ–°', value: 'frequent' }
            ]}
          />

          <div className="h-px w-full my-8 bg-pebble" />

          {/* Part 3: è¦–è¦ºé¢¨æ ¼ */}
          <SectionTitle number="03" title="è¦–è¦ºèˆ‡é¢¨æ ¼åå¥½" />

          <CustomInput 
            label="åå¥½çš„è‰²èª¿æˆ–é¢¨æ ¼" 
            placeholder="ex: æ¥µç°¡ç™½ã€è«è˜­è¿ªè‰²ç³»ã€å·¥æ¥­é¢¨..."
            value={formData.stylePref}
            onChange={(val) => setFormData({...formData, stylePref: val})}
          />

          <CustomInput 
            label="åƒè€ƒç¶²ç«™é€£çµ" 
            placeholder="è«‹è²¼ä¸Š 1-2 å€‹æ‚¨å–œæ­¡çš„ç¶²ç«™é€£çµ"
            multiline
            value={formData.refSites}
            onChange={(val) => setFormData({...formData, refSites: val})}
          />

          <div className="h-px w-full my-8 bg-pebble" />

          {/* Part 4: æˆæ¬Š */}
          <SectionTitle number="04" title="å¸³è™Ÿæˆæ¬Šèˆ‡è³‡æ–™æ­¸å±¬" />
          
          <div className="p-5 rounded-xl bg-oatmeal/50 border border-pebble mb-4">
            <p className="text-sm text-smoke leading-relaxed mb-4">
              ç‚ºäº†ä¿éšœæ‚¨çš„è³‡æ–™æ‰€æœ‰æ¬Šèˆ‡å¾ŒçºŒç¶­è­·çš„ä¾¿åˆ©æ€§ï¼Œæˆ‘æœƒå°‡æ‰€æœ‰çš„ç¨‹å¼ç¢¼ã€è³‡æ–™åº«åŠéƒ¨å±¬è¨­å®šå„²å­˜åœ¨æ‚¨çš„ Google å¸³è™Ÿä¸­ã€‚æ‚¨å¯ä»¥æ–°ç”³è«‹ä¸€å€‹å°ˆç”¨çš„ Gmail ï¼Œçµæ¡ˆå¾Œæ‚¨å¯ä»¥è‡ªè¡Œæ›´æ”¹å¯†ç¢¼ï¼Œé€™èƒ½ç¢ºä¿ç¶²é çš„æ‰€æœ‰æ¬Šæ°¸é å±¬æ–¼æ‚¨ã€‚
            </p>
            <CustomCheckbox 
              label="æˆ‘äº†è§£ä¸¦åŒæ„ä¸Šè¿°èªªæ˜"
              checked={formData.dataOwnership}
              onChange={(checked) => setFormData({...formData, dataOwnership: checked})}
            />
          </div>

          <div className="h-px w-full my-8 bg-pebble" />

          {/* Part 5: é ç®—èˆ‡æ™‚ç¨‹ */}
          <SectionTitle number="05" title="é ç®—èˆ‡æ™‚ç¨‹" />

          <CustomRadio 
            label="é ç®—å€é–“"
            name="budget"
            value={formData.budget}
            onChange={(val) => setFormData({...formData, budget: val})}
            options={[
              { label: 'NT$ 1,500 (åƒ…é¦–é )', value: '1500' },
              { label: 'NT$ 5,000 ä»¥ä¸‹', value: 'under_5000' },
              { label: 'NT$ 5,000 - NT$ 15,000', value: '5000_15000' },
              { label: 'NT$ 15,000 - NT$ 30,000', value: '15000_30000' },
              { label: 'NT$ 30,000 ä»¥ä¸Š', value: 'above_30000' }
            ]}
          />

          <div className="mb-8">
            <label className="block text-base font-bold text-obsidian mb-3">é è¨ˆä¸Šç·šæ™‚é–“</label>
            <CustomRadio 
              label=""
              name="launchDateType"
              value={formData.launchDateType}
              onChange={(val) => setFormData({...formData, launchDateType: val})}
              options={[
                { label: 'ç„¡å…·é«”æ™‚é–“è¦æ±‚', value: 'none' },
                { label: 'æœ‰ï¼Œè«‹é¸æ“‡æ—¥æœŸ', value: 'specific' }
              ]}
            />
            {formData.launchDateType === 'specific' && (
              <div className="ml-2 animate-in fade-in slide-in-from-top-2">
                <input 
                  type="date" 
                  className="w-full p-4 rounded-xl bg-white border-2 border-slate text-obsidian outline-none"
                  value={formData.launchDateValue}
                  onChange={(e) => setFormData({...formData, launchDateValue: e.target.value})}
                />
              </div>
            )}
          </div>

          <div className="mb-8">
            <label className="block text-base font-bold text-obsidian mb-3">ç¾æˆç´ æ (å¯è¤‡é¸)</label>
            <div className="flex flex-col gap-1">
              {['æ–‡æ¡ˆå…§å®¹', 'æ¨™èªŒ (Logo)', 'åœ–ç‰‡ / å½±ç‰‡', 'ç›®å‰æš«ç„¡ï¼Œéœ€è¨è«–'].map(asset => (
                <CustomCheckbox 
                  key={asset}
                  label={asset}
                  checked={formData.assets.includes(asset)}
                  onChange={() => handleCheckboxGroup('assets', asset)}
                />
              ))}
            </div>
          </div>

          {/* Action Buttons */}
          <div className="mt-12 pt-6 border-t border-pebble flex justify-end">
             <button
              onClick={handleSubmitClick}
              className="group relative px-8 py-4 rounded-full text-white font-bold text-lg shadow-lg overflow-hidden transition-transform transform active:scale-95"
              style={{ backgroundColor: theme.slate }}
             >
               <span className="relative z-10 flex items-center gap-2">
                 é è¦½ä¸¦é€å‡º <ChevronRight size={20} />
               </span>
               <div className="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300" />
             </button>
          </div>

        </div>
        
        {/* Footer info */}
        <div className="text-center mt-8 pb-8 text-mist text-xs">
          &copy; {new Date().getFullYear()} Studio Name. All rights reserved.
        </div>

      </div>

      {/* Dialog */}
      <ConfirmDialog 
        isOpen={isDialogOpen} 
        onClose={() => setIsDialogOpen(false)}
        onConfirm={handleFinalSubmit}
        data={formData}
        isSubmitting={isSubmitting}
      />
      
    </div>
  );
}